<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="2672" MadCap:lastWidth="1380" MadCap:ignoredWords="classi;tutte;elementi;Gestione;login;Nel;vengono;completamente;gestiti;da;senza;l'utilizzo;di;FB;Sono;presenti;titolo;maschera;Colore;maschere;Contenuto;Dispositivo;DEVICE1;Device1;dispositivo;DEVICE2;Device2;DEVICEN;Devicen;Conf;unità;UNITCFG;Unitcfg;UnitCfgRes;LightGreen;dei;parametri;Storico;ALRMLOGS;Alrms_Log;Alrms_NoLog;allarmi;Impostazioni;ora;DATETIME;DateTimeChange;DaylightSavingTime;LightCoral;Cambio;formato;configurazione;legale;solare;Lingua;STARTUP;WhiteCoral;Selezione;lingua;Porte;seriali;SERIALPORTS;SerialPorts;pwd;PWDMNG;PwdChg;Utente;Costruttore;Inizializzazione;AlrmInit;MistyRose;contatori;automatici;installazione;valori;Logout;Pwd_Logout;DarkGray;Premendo;il;tasto;Prg;si;potrà;quindi;accedere;al;attraverso;Login;qui;ci;dovrà;loggare;Ogni;utente;avrà;determinati;WhiteSmoke;permessi;che;verranno;classe;CL_DummyService;CL_DummyManuf;aggiungere;una;voce;un;è;necessario;agire;all'interno;delle;Aggiornare;numero;oggetti;dalle;variabili;globali;VAR_GLOBAL;alla;All'interno;sono;ogni;esempio;utilizzate;CL_MainTxtTOP;CL_MainTxtMIDDLE;CL_MainTxtBOTTOM;le;Il;stato;introdotto;poter;navigare;rapidamente;nelle;più;importanti;principale;contiene;collegamenti;OnOff;Informazioni;Allarmi;storico;Attraverso;tabella" xml:lang="en-us" MadCap:fileTags="AuthorFileTags.CAREL INDUSTRIES&#160;SpA">
    <head>
        <link href="../../Resources/TableStyles/Standard_table.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <meta name="Originator" content="ImportDoc" />
        <meta name="OriginalFile" content="Project_Template.doc" /><title></title>
        <link rel="stylesheet" href="../../Resources/Stylesheets/styles.css" />
        <style>
a:link
{
	color: #0000ff;
}
a:visited
{
	color: #0000ff;
}

</style>
        <link href="../../Resources/PageLayouts/CAREL.flpgl" rel="pagelayout" MadCap:pagelayoutType="temporary" />
        <link href="../../Resources/Stylesheets/styles.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h4><a name="Menu"></a>
            <MadCap:concept term="Project Template" />Menu management</h4>
        <h5>Introduction</h5>
        <p>Menus are fully managed by c.mask in <b>Project Template</b> without the use of functions or function blocks. There are two menus:</p>
        <ul>
            <li>Main Menu</li>
            <li>Settings Menu<br /></li>
        </ul>
        <p>To open the main menu, click <b>Prg</b>: the <b>Login</b> screen is shown. </p>
        <h5>Menu features</h5>
        <p>The two menus are described below:</p>
        <table style="width: 100%; margin-left: 0; margin-right: auto; mc-table-style: url('../../Resources/TableStyles/Standard_table.css'); mc-table-style-original: url('../../Resources/TableStyles/Standard_table.css');" class="TableStyle-Standard" cellspacing="0">
            <col class="TableStyle-Standard-Column-Regular" />
            <col class="TableStyle-Standard-Column-Regular" />
            <col class="TableStyle-Standard-Column-Regular" />
            <col class="TableStyle-Standard-Column-Regular" />
            <col class="TableStyle-Standard-Column-Regular" />
            <col class="TableStyle-Standard-Column-Regular" />
            <thead>
                <tr class="TableStyle-Standard-Head-Header1">
                    <th class="TableStyle-Standard-HeadE-Regular-Header1" style="font-weight: bold;">Main Menu</th>
                    <th class="TableStyle-Standard-HeadE-Regular-Header1">Settings Menu</th>
                    <th class="TableStyle-Standard-HeadE-Regular-Header1">Loop name</th>
                    <th class="TableStyle-Standard-HeadE-Regular-Header1">Mask title</th>
                    <th class="TableStyle-Standard-HeadE-Regular-Header1">Screencolor</th>
                    <th class="TableStyle-Standard-HeadD-Regular-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyE-Regular-Row1" style="font-weight: bold;">Device 1</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">-</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">DEVICE1<br /></td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">Device1</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">White</td>
                    <td class="TableStyle-Standard-BodyD-Regular-Row1">Device 1 parameters</td>
                </tr>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyE-Regular-Row1" style="font-weight: bold;">Device 2</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">-</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">DEVICE2<br /></td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">Device2</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">White</td>
                    <td class="TableStyle-Standard-BodyD-Regular-Row1">Device 2 parameters</td>
                </tr>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyE-Regular-Row1" style="font-weight: bold;">Device N</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">-</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">DEVICEN<br /><br /></td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">Devicen</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">White</td>
                    <td class="TableStyle-Standard-BodyD-Regular-Row1">Device n parameters</td>
                </tr>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyE-Regular-Row1" style="font-weight: bold;">Unit conf.</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">-</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">UNITCFG</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">
                        <p>ParamsImpExp<br />AlrmExp<br />ParamsImpExpRes<br />ParamsImpExpErr<br />AlrmExpRes<br /></p>
                    </td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">LightGreen<br /></td>
                    <td class="TableStyle-Standard-BodyD-Regular-Row1">
                        <p>Unit configuration parameters (i.e. number of compressors, number of circuits, import/export parameters, alarm export)</p>
                    </td>
                </tr>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyE-Regular-Row1" style="font-weight: bold;">Alarm logs</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">-</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">ALRMLOGS</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">Alrms_Log<br />Alrms_NoLog</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">255; 128; 128<br />WhiteSmoke</td>
                    <td class="TableStyle-Standard-BodyD-Regular-Row1">Alarm log</td>
                </tr>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyE-Regular-Row1" style="font-weight: bold;" rowspan="5">Settings</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1" style="font-weight: bold;">Date/time</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">DATETIME</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">DateTimeChange<br />TimeZone</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">LightCoral<br />LightCoral</td>
                    <td class="TableStyle-Standard-BodyD-Regular-Row1">Change date/time, time format and  time zone settings</td>
                </tr>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyE-Regular-Row1" style="font-weight: bold;">Language</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">STARTUP<br /></td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">Language</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">WhiteCoral</td>
                    <td class="TableStyle-Standard-BodyD-Regular-Row1">Language selection (EN, IT, DE, FR, ES)</td>
                </tr>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyE-Regular-Row1" style="font-weight: bold;">Serial ports</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">SERIALPORTS<br /></td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">SerialPorts</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">255; 155; 160</td>
                    <td class="TableStyle-Standard-BodyD-Regular-Row1">-</td>
                </tr>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyE-Regular-Row1" style="font-weight: bold;">Change pwd</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">PWDMNG<br /></td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">PwdChg</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">255; 190; 192</td>
                    <td class="TableStyle-Standard-BodyD-Regular-Row1">Change password (User Service, Manufacturer)</td>
                </tr>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyE-Regular-Row1" style="font-weight: bold;">Initialization</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">INITIALIZATION</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">AlrmInit<br />Default</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">MistyRose<br />MistyRose</td>
                    <td class="TableStyle-Standard-BodyD-Regular-Row1">Alarm log reset, semi-automatic alarm counter reset, enable/disable buzzer, default value installation</td>
                </tr>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">&#160;</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1" style="font-weight: bold;">UoM</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">UOM</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">UoM_UI, UoM_tERA_WEB</td>
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">253; 243; 243</td>
                    <td class="TableStyle-Standard-BodyD-Regular-Row1">UoM mangament for UI and web/tERA editor</td>
                </tr>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyB-Regular-Row1" style="font-weight: bold;">Logout</td>
                    <td class="TableStyle-Standard-BodyB-Regular-Row1">-</td>
                    <td class="TableStyle-Standard-BodyB-Regular-Row1">-</td>
                    <td class="TableStyle-Standard-BodyB-Regular-Row1">Pwd_Logout</td>
                    <td class="TableStyle-Standard-BodyB-Regular-Row1">DarkGray</td>
                    <td class="TableStyle-Standard-BodyA-Regular-Row1">Logout <br /></td>
                </tr>
            </tbody>
        </table>
        <h5>Login</h5>
        <p>There are three password levels: User, Service or Manufacturer. Furthermore, there is a <b>Passe par tout</b> that can be customised in c.strategy using the <b>  <![CDATA[ ]]></b><i>PwdPassepartout</i> variable.</p>
        <p class="warning" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: Red;&quot; class=&quot;mcFormatColor&quot;&gt;Warning &lt;/span&gt;&lt;/b&gt;">User, Service and Manufacturer passwords are saved in Retain memory and use the initial value from the DEV editor.</p>
        <p>To associate parameter editing to the three login levels, refer to <b>DummyService</b> class for Service or <b>DummyManuf</b> class for the Manufacturer. <br />It is possible to use associate also the <b>DummyManufUnitOff</b> class, that allows to edit the manufacturer parameters only if the unit is off.</p>
        <h5 align="left">Logout</h5>
        <p align="left">After five minutes of built-in or external terminal inactivity, Project Template automatically returns to the main screen, logs out from the menu and turns off the PGD backlighting .<br />To change these settings, go to the <b>RetMainMsk</b> function in c.mask and <b>SetExternalDisplayMode()</b> (in the <b>Timed loop</b>). </p>
        <h5>Menu structure</h5>
        <p>The "<b>MaskPos</b>" variable tracks the position inside the menu. It is used for ESC button management, through the "<b>GlobalEsc</b>" ST function in c.mask.<br />The menu structure is shown below:</p>
        <p>
            <img src="../../Resources/Images/5_Project_Template/PT_Menu_Structure.jpg" style="width: 854px; height: 216px;" class="OneHundredPercent" />
        </p>
        <p class="note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #bed230;&quot; class=&quot;mcFormatColor&quot;&gt;Note &lt;/span&gt;&lt;/b&gt;">Every time a new menu item is added, remember to set the correct value for the "MaskPos" variable.</p>
        <h5><a name="Editing2"></a>Editing a menu</h5>
        <p>Follow the steps below to edit a menu:<br /></p>
        <ol>
            <li>In c.mask ST code "VAR_GLOBAL", update the number of menu items, using variables MAIN_MENU_ITEMS_NO (for the main menu), SETTINGS_MENU_ITEMS_NO (for the settings menu).</li>
            <li>Each menu is linked to three classes: <br />Main menu: MainTxtTOP, MainTxtMIDDLE and MainTxtBOTTOM;<br />Settings menu: SettingsTxtTOP, SettingsTxtMIDDLE and SettingsTxtBOTTOM.<br />Quick menu: see paragraph <MadCap:xref href="#Editing">"Editing quick menu"</MadCap:xref>.<br />Change classes according to need.<br /><p class="note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #bed230;&quot; class=&quot;mcFormatColor&quot;&gt;Note &lt;/span&gt;&lt;/b&gt;">Keep attention: TOP class has all the items while MIDDLE is without the first and BOTTOM without the first and second items.</p></li>
            <li>Add icons to IdxImgMain (for the main menu) and IdxImgSettings (for the settings menu) following the order and adding the normal icon first and then the negative one.</li>
            <li>Edit function <b>SelMainMenu  </b><b style="font-weight: normal;">(for the main menu)</b>, <b>SelMainSettings  </b><b style="font-weight: normal;">(for the settings menu)</b>  in Code.st, using <b>CASE OF</b>: "case of" index has to match with the classes index + 1, see image below<br /><img src="../../Resources/Images/5_Project_Template/EditMenu_1.png" class="OneHundredPercentThumbnail" /></li>
        </ol>
        <h5>Language</h5>
        <p style="text-align: left;" align="left">The Project Template user interface is translated into several languages. To change the language:</p>
        <table style="width: 100%; margin-left: 0; margin-right: auto; mc-table-style: url('../../Resources/TableStyles/Standard_table.css'); mc-table-style-original: url('../../Resources/TableStyles/Standard_table.css');" class="TableStyle-Standard" cellspacing="0">
            <col class="TableStyle-Standard-Column-Regular" />
            <col class="TableStyle-Standard-Column-Regular" />
            <thead>
                <tr class="TableStyle-Standard-Head-Header1">
                    <th class="TableStyle-Standard-HeadE-Regular-Header1">Type</th>
                    <th class="TableStyle-Standard-HeadD-Regular-Header1">Details</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyE-Regular-Row1">Automatic</td>
                    <td class="TableStyle-Standard-BodyD-Regular-Row1">After installing the default values (automatic/manual) the CAREL logo appears for a few seconds (10 by default) and the language selection screen. Scroll the languages using the Enter button and confirm by pressing Esc.</td>
                </tr>
                <tr class="TableStyle-Standard-Body-Row1">
                    <td class="TableStyle-Standard-BodyB-Regular-Row1">Manual</td>
                    <td class="TableStyle-Standard-BodyA-Regular-Row1">From the <b style="font-weight: normal;"><b>Main menu</b>, </b> <b>Settings, Language </b> <![CDATA[ ]]></td>
                </tr>
            </tbody>
        </table>
        <h5>Quick menu</h5>
        <p style="font-size: 10pt;">The <b>quick menu</b> was introduced to quickly scroll the most important screens from the main screen.<br />It contains links to three loops by default:</p>
        <ul>
            <li style="font-size: 10pt;font-weight: normal;">Unit OnOff</li>
            <li style="font-size: 10pt;font-weight: normal;">Information</li>
            <li style="font-size: 10pt;font-weight: normal;">Set<br /></li>
        </ul>
        <h6><span style="font-weight: bold;">Quick menu example</span>
        </h6>
        <p>
            <img src="../../Resources/Images/5_Project_Template/QMOnOff.JPG" style="width: 146px; height: 72px;" class="OneHundredPercentThumbnail" /> <img src="../../Resources/Images/5_Project_Template/QuickMenu.JPG" style="width: 135px; height: 73px;" class="OneHundredPercentThumbnail" /></p>
        <p>Like the main menu, all code is managed in c.mask, without the use of functions or function blocks.<br /></p>
        <h6><a name="Editing"></a>Editing quick menu</h6>
        <p>To modify the quick menu:</p>
        <ol>
            <li style="font-size: 10pt">In VAR_GLOBAL of c.mask ST code, update the number of items through the QUICK_MENU_ITEMS_NO  variable </li>
            <li style="font-size: 10pt">Add the 2 images (one normal, the other with the white bottom bar) to the IdxImgQM class , respecting the order (eg: if having to add a fourth item, the first image will have index 4, the second with the bar will have index 8)</li>
            <li style="font-size: 10pt">In ST code modify the QuickMenuENT function </li>
        </ol>
        <p>&#160;</p>
        <p>
            <MadCap:conceptLink term="Project Template" />
        </p>&#160;</body>
</html>