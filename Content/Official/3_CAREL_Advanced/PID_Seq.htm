<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" MadCap:lastBlockDepth="6" MadCap:lastHeight="4053" MadCap:lastWidth="975" MadCap:fileTags="AuthorFileTags.CAREL INDUSTRIES&#160;SpA" MadCap:conditions="CAREL_Hq.Reserved">
    <head>
        <link href="../../Resources/TableStyles/01_Technical_Features.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <link href="../../Resources/TableStyles/03_Input_Output.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <link href="../../Resources/TableStyles/04_Release_Notes.css" rel="stylesheet" MadCap:stylesheetType="table" /><title></title>
        <link href="../../Resources/Stylesheets/styles.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h4>PID_Seq</h4>
        <p class="descriptionshort">Manages a sequence of Incremental PID control loops</p>
        <p class="descriptionshort">
            <img src="../../Resources/Images/3_CAREL_Advanced/PID_Seq/PID_Seq_FB.PNG" class="OneHundredPercentThumbnail" />
        </p>
        <p>&#160;</p>
        <h5 style="mc-locked: unlocked;">Technical features</h5>
        <table class="TableStyle-TechFeatures" style="margin-left: 0; margin-right: auto; width: 80%; mc-table-style: url('../../Resources/TableStyles/01_Technical_Features.css');" cellspacing="0">
            <col class="TableStyle-TechFeatures-Column-Feature" />
            <col class="TableStyle-TechFeatures-Column-Value" />
            <col class="TableStyle-TechFeatures-Column-Notes" />
            <thead>
                <tr class="TableStyle-TechFeatures-Head-Header1">
                    <th class="TableStyle-TechFeatures-HeadE-Feature-Header1">Feature</th>
                    <th class="TableStyle-TechFeatures-HeadE-Value-Header1">Value</th>
                    <th class="TableStyle-TechFeatures-HeadD-Notes-Header1" style="mc-locked: unlocked;">Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr style="height: 25pt;" class="TableStyle-TechFeatures-Body-Row1" MadCap:conditions="CAREL_Hq.Reserved">
                    <td class="TableStyle-TechFeatures-BodyE-Feature-Row1" style="mc-locked: unlocked;">Last update</td>
                    <td class="TableStyle-TechFeatures-BodyE-Value-Row1">15/02/2016</td>
                    <td class="TableStyle-TechFeatures-BodyD-Notes-Row1">-</td>
                </tr>
                <tr style="height: 25pt;" class="TableStyle-TechFeatures-Body-Body1" MadCap:conditions="CAREL_Hq.Reserved">
                    <td class="TableStyle-TechFeatures-BodyE-Feature-Body1" style="mc-locked: unlocked;">Native revision</td>
                    <td class="TableStyle-TechFeatures-BodyE-Value-Body1">29/11/2016</td>
                    <td class="TableStyle-TechFeatures-BodyD-Notes-Body1">-</td>
                </tr>
                <tr style="height: 25pt;" class="TableStyle-TechFeatures-Body-Row1">
                    <td class="TableStyle-TechFeatures-BodyE-Feature-Row1" style="mc-locked: unlocked;">Program Organization Unit type</td>
                    <td class="TableStyle-TechFeatures-BodyE-Value-Row1">Function block </td>
                    <td class="TableStyle-TechFeatures-BodyD-Notes-Row1">-</td>
                </tr>
                <tr style="height: 25pt;" class="TableStyle-TechFeatures-Body-Body1">
                    <td class="TableStyle-TechFeatures-BodyE-Feature-Body1" style="mc-locked: unlocked;">c.suite version</td>
                    <td class="TableStyle-TechFeatures-BodyE-Value-Body1">≥ 2.7.12</td>
                    <td class="TableStyle-TechFeatures-BodyD-Notes-Body1">-</td>
                </tr>
                <tr class="TableStyle-TechFeatures-Body-Row1">
                    <td class="TableStyle-TechFeatures-BodyE-Feature-Row1" style="mc-locked: unlocked;">Hardware</td>
                    <td class="TableStyle-TechFeatures-BodyE-Value-Row1">c.pCO family controller</td>
                    <td class="TableStyle-TechFeatures-BodyD-Notes-Row1">-</td>
                </tr>
                <tr class="TableStyle-TechFeatures-Body-Body1">
                    <td class="TableStyle-TechFeatures-BodyE-Feature-Body1" style="mc-locked: unlocked;">O.S.</td>
                    <td class="TableStyle-TechFeatures-BodyE-Value-Body1">≥ 2.7.000</td>
                    <td class="TableStyle-TechFeatures-BodyD-Notes-Body1">-</td>
                </tr>
                <tr class="TableStyle-TechFeatures-Body-Row1">
                    <td class="TableStyle-TechFeatures-BodyE-Feature-Row1" style="mc-locked: unlocked;">Compatibility with other F/FB</td>
                    <td class="TableStyle-TechFeatures-BodyE-Value-Row1">-</td>
                    <td class="TableStyle-TechFeatures-BodyD-Notes-Row1">-</td>
                </tr>
                <tr class="TableStyle-TechFeatures-Body-Body1">
                    <td class="TableStyle-TechFeatures-BodyE-Feature-Body1" style="mc-locked: unlocked;">Compatible CAREL device P/Ns
</td>
                    <td class="TableStyle-TechFeatures-BodyE-Value-Body1">-
</td>
                    <td class="TableStyle-TechFeatures-BodyD-Notes-Body1">-</td>
                </tr>
                <tr class="TableStyle-TechFeatures-Body-Row1">
                    <td class="TableStyle-TechFeatures-BodyE-Feature-Row1" style="mc-locked: unlocked;">Device manual</td>
                    <td class="TableStyle-TechFeatures-BodyE-Value-Row1">-</td>
                    <td class="TableStyle-TechFeatures-BodyD-Notes-Row1">-</td>
                </tr>
                <tr class="TableStyle-TechFeatures-Body-Body1">
                    <td class="TableStyle-TechFeatures-BodyE-Feature-Body1" style="mc-locked: unlocked;">Device firmware</td>
                    <td class="TableStyle-TechFeatures-BodyE-Value-Body1">-</td>
                    <td class="TableStyle-TechFeatures-BodyD-Notes-Body1">-</td>
                </tr>
                <tr class="TableStyle-TechFeatures-Body-Row1">
                    <td class="TableStyle-TechFeatures-BodyE-Feature-Row1" style="mc-locked: unlocked;">Password</td>
                    <td class="TableStyle-TechFeatures-BodyE-Value-Row1">-</td>
                    <td class="TableStyle-TechFeatures-BodyD-Notes-Row1">-</td>
                </tr>
                <tr class="TableStyle-TechFeatures-Body-Body1">
                    <td class="TableStyle-TechFeatures-BodyE-Feature-Body1" style="mc-locked: unlocked;">Protocols</td>
                    <td class="TableStyle-TechFeatures-BodyE-Value-Body1">-</td>
                    <td class="TableStyle-TechFeatures-BodyD-Notes-Body1">-</td>
                </tr>
                <tr class="TableStyle-TechFeatures-Body-Row1">
                    <td class="TableStyle-TechFeatures-BodyB-Feature-Row1" style="mc-locked: unlocked;">Footprint</td>
                    <td class="TableStyle-TechFeatures-BodyB-Value-Row1">RAM
:22376 bytes<br />Retain:
382 bytes<br />Program cycle time:
15ms<br />Carel Master polling time:-<br />Modbus Master polling time:-<br /></td>
                    <td class="TableStyle-TechFeatures-BodyA-Notes-Row1">-</td>
                </tr>
            </tbody>
        </table>
        <p>&#160;</p>
        <h5 style="mc-locked: unlocked;">General operations</h5>
        <p>This block is used to calculate the capacity request for a sequence of devices in order to reach the control set point, each device has its own PID parameters settings. The PID_Seq function block manages 16 devices.</p>
        <p>The algorithm uses Proportional, Integral and Derivative terms (all of them, or only some) to achieve the best performance. </p>
        <p>The integral or derivative part can be inhibited by setting the relevant action time to zero (see paragraph below).</p>
        <p>The formulas used are those relating to incremental PID, where the output is the result of the sum of the three calculated deltas between two different samples of the input variable.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #bed230;&quot; class=&quot;mcFormatColor&quot;&gt;Note &lt;/span&gt;&lt;/b&gt;">The set point is the same for all the devices.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #bed230;&quot; class=&quot;mcFormatColor&quot;&gt;Note &lt;/span&gt;&lt;/b&gt;">This algorithm doesn't use the control band parameter as an input, this means that the Function Block uses the proportional gain (Kp).</p>
        <h6>How it works</h6>
        <p>
            <img src="../../Resources/Images/3_CAREL_Advanced/PID_Seq/PID_Seq2.png" class="OneHundredPercentThumbnail" />
        </p>
        <p>&#160;</p>
        <h6>Key</h6>
        <p>DevCfg_PID_Seq[x] is the  element x of the array DevCfg_PID_Seq, where x is between 0 and 15.</p>
        <p>&#160;</p>
        <h6>How to disable the integral or derivative part </h6>
        <p>The integral or derivative part can be disabled by setting the relative parameter to zero.</p>
        <p>Integral action set DevCfg_PID_Seq[x].Ti = 0.</p>
        <p>Derivative action set DevCfg_PID_Seq[x].Td = 0.</p>
        <p>&#160;</p>
        <h6>Sampling time</h6>
        <p>The Period_PID_Seq input parameter is the input variable sampling time.</p>
        <p>At each settable period, the RegVar_PID_Seq input parameter is sampled and the delta is calculated between two samples.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #bed230;&quot; class=&quot;mcFormatColor&quot;&gt;Note &lt;/span&gt;&lt;/b&gt;">The sampling time is the same for all the devices.</p>
        <p>&#160;</p>
        <h6>Dead band</h6>
        <p>The function intends to keep the output value stable as long as the input remains within the DeadBand. DeadBand is the range between [Setpoint+(DeadBand/2)] and [Setpoint-(DeadBand/2)]. The function is usually disabled and can be enabled by setting the DeadBand input parameter to a value greater than 0.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #bed230;&quot; class=&quot;mcFormatColor&quot;&gt;Note &lt;/span&gt;&lt;/b&gt;">The Dead band is the same for all the devices.</p>
        <p>&#160;</p>
        <h6>Cool/Heat mode vs Direct/Reverse mode</h6>
        <p>Cooling/Heating mode refers to the calculation of the delta between two different samples of the sampled input variable. It depends on whether the measurement is above the set point (cooling) or below the set  point (heating).</p>
        <p>Direct/Reverse mode acts on the PID output. </p>
        <p>Direct action means that the controller output rises if the measurement increases. Indirect (reverse) action means that the controller output drops when the measurement rises.</p>
        <p>The picture below shows how the values of these two input parameters affect the output of the algorithm:</p>
        <p>
            <img src="../../Resources/Images/3_CAREL_Advanced/PID_Seq/PID_Seq_Direct_Reverse.png" class="OneHundredPercentThumbnail" />
        </p>
        <p class="note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #bed230;&quot; class=&quot;mcFormatColor&quot;&gt;Note &lt;/span&gt;&lt;/b&gt;">The cool/heat mode is the same for all the devices (CoolHeatMode_PID_Seq) while each device has its own direct/reverse mode setting (DevCfg_PID_Seq[x].ReverseMode.</p>
        <p>&#160;</p>
        <h6>Output limitations</h6>
        <p>With DevCfg_PID_Seq[x].OutLowLim and DevCfg_PID_Seq[x].OutHighLim is possible to limit the output (OutputVal_PID_Seq[x]) to a range of values. </p>
        <p>The default values of these inputs must be set to 0.0 and 100.0 if no limitations are required.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #bed230;&quot; class=&quot;mcFormatColor&quot;&gt;Note &lt;/span&gt;&lt;/b&gt;">DevCfg_PID_Seq[x].OutLowLim and DevCfg_PID_Seq[x].OutHighLim must be greater than or equal to 0.0.</p>
        <p>&#160;</p>
        <h6>Manual mode</h6>
        <p>When DevCfg_PID_Seq[x].En_ManMode is TRUE, the algorithm is bypassed and the  OutputVal_PID_Seq[x] takes exactly the same value as DevCfg_PID_Seq[x].ManModeVal in accordance with the maximum and minimum limits.</p>
        <p>When manual mode is enabled, the algorithm constantly keeps the samples of the input variable updated. This allows the PID to calculate the next delta starting from the previous value in manual mode.</p>
        <p> If En_PID_Incr is FALSE, each element of the OutputVal_PID_Seq array  is 0.0 also if the device is in manual mode.</p>
        <p>&#160;</p>
        <h6>Enable and reset</h6>
        <p>If En_PID_Seq is FALSE, each element of the OutputVal_PID_Seq array  is always 0.0  and the entire algorithm is bypassed. All internal errors and temporary variables are reset.</p>
        <p>This input can be used for resetting the PID.</p>
        <p class="warning" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: Red;&quot; class=&quot;mcFormatColor&quot;&gt;Warning &lt;/span&gt;&lt;/b&gt;">To disable the PID, it is not sufficient to simply avoid calling it (in ST language), because in this way it is not reset and all errors continue to increase, only the use of En_PID_Seq can disable and/or reset the function.</p>
        <p style="mc-locked: unlocked;">&#160;</p>
        <h5 style="mc-locked: unlocked;">Inputs</h5>
        <p class="InnerTitle" style="mc-locked: unlocked;font-weight: normal;">Block pin list</p>
        <table style="mc-table-style: url('../../Resources/TableStyles/03_Input_Output.css'); margin-left: 0; margin-right: auto; width: 80%;" class="TableStyle-03_Input_Output" cellspacing="0">
            <col class="TableStyle-03_Input_Output-Column-Variable" />
            <col class="TableStyle-03_Input_Output-Column-Type" />
            <col class="TableStyle-03_Input_Output-Column-UM" />
            <col class="TableStyle-03_Input_Output-Column-Description" />
            <thead>
                <tr class="TableStyle-03_Input_Output-Head-Header1">
                    <th class="TableStyle-03_Input_Output-HeadE-Variable-Header1">Variable</th>
                    <th class="TableStyle-03_Input_Output-HeadE-Type-Header1">
                        <p>Data type</p>
                    </th>
                    <th class="TableStyle-03_Input_Output-HeadE-UM-Header1">UoM</th>
                    <th class="TableStyle-03_Input_Output-HeadD-Description-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-03_Input_Output-Body-LightRows">
                    <td class="TableStyle-03_Input_Output-BodyE-Variable-LightRows">RegVar_PID_Seq</td>
                    <td class="TableStyle-03_Input_Output-BodyE-Type-LightRows">	REAL</td>
                    <td class="TableStyle-03_Input_Output-BodyE-UM-LightRows">-</td>
                    <td class="TableStyle-03_Input_Output-BodyD-Description-LightRows">Control  value</td>
                </tr>
                <tr class="TableStyle-03_Input_Output-Body-DarkerRows">
                    <td class="TableStyle-03_Input_Output-BodyE-Variable-DarkerRows">SetP_PID_Seq</td>
                    <td class="TableStyle-03_Input_Output-BodyE-Type-DarkerRows">REAL</td>
                    <td class="TableStyle-03_Input_Output-BodyE-UM-DarkerRows">-</td>
                    <td class="TableStyle-03_Input_Output-BodyD-Description-DarkerRows">Control  set point</td>
                </tr>
                <tr class="TableStyle-03_Input_Output-Body-LightRows">
                    <td class="TableStyle-03_Input_Output-BodyE-Variable-LightRows">DeadBand_PID_Seq</td>
                    <td class="TableStyle-03_Input_Output-BodyE-Type-LightRows">REAL</td>
                    <td class="TableStyle-03_Input_Output-BodyE-UM-LightRows">-</td>
                    <td class="TableStyle-03_Input_Output-BodyD-Description-LightRows">Dead band</td>
                </tr>
                <tr class="TableStyle-03_Input_Output-Body-DarkerRows">
                    <td class="TableStyle-03_Input_Output-BodyE-Variable-DarkerRows">DevCfg_PID_Seq</td>
                    <td class="TableStyle-03_Input_Output-BodyE-Type-DarkerRows">DEV_CFG_PID_SEQ</td>
                    <td class="TableStyle-03_Input_Output-BodyE-UM-DarkerRows">-</td>
                    <td class="TableStyle-03_Input_Output-BodyD-Description-DarkerRows">PID Sequence configuration parameters (Kp, Ti, Td, Min/Max limit, Period, etc...)</td>
                </tr>
                <tr class="TableStyle-03_Input_Output-Body-LightRows">
                    <td class="TableStyle-03_Input_Output-BodyE-Variable-LightRows">CoolHeatMode_PID_Seq</td>
                    <td class="TableStyle-03_Input_Output-BodyE-Type-LightRows">BOOL</td>
                    <td class="TableStyle-03_Input_Output-BodyE-UM-LightRows">-</td>
                    <td class="TableStyle-03_Input_Output-BodyD-Description-LightRows">Cooling/Heating mode (FALSE: cooling; TRUE: heating)</td>
                </tr>
                <tr class="TableStyle-03_Input_Output-Body-DarkerRows">
                    <td class="TableStyle-03_Input_Output-BodyE-Variable-DarkerRows">Period_PID_Seq</td>
                    <td class="TableStyle-03_Input_Output-BodyE-Type-DarkerRows">UDINT</td>
                    <td class="TableStyle-03_Input_Output-BodyE-UM-DarkerRows">-</td>
                    <td class="TableStyle-03_Input_Output-BodyD-Description-DarkerRows">Input sampling time</td>
                </tr>
                <tr class="TableStyle-03_Input_Output-Body-LightRows">
                    <td class="TableStyle-03_Input_Output-BodyB-Variable-LightRows">En_PID_Seq</td>
                    <td class="TableStyle-03_Input_Output-BodyB-Type-LightRows">BOOL</td>
                    <td class="TableStyle-03_Input_Output-BodyB-UM-LightRows">-</td>
                    <td class="TableStyle-03_Input_Output-BodyA-Description-LightRows">Enable algorithm</td>
                </tr>
            </tbody>
        </table>
        <p>&#160;</p>
        <h5>Outputs</h5>
        <p class="InnerTitle" style="font-weight: normal;">Block pin list</p>
        <table style="margin-left: 0; margin-right: auto; width: 80%; mc-table-style: url('../../Resources/TableStyles/03_Input_Output.css');" class="TableStyle-03_Input_Output" cellspacing="0">
            <col class="TableStyle-03_Input_Output-Column-Variable" />
            <col class="TableStyle-03_Input_Output-Column-Type" style="width: 94px;" />
            <col class="TableStyle-03_Input_Output-Column-UM" />
            <col class="TableStyle-03_Input_Output-Column-Description" />
            <thead>
                <tr class="TableStyle-03_Input_Output-Head-Header1">
                    <th class="TableStyle-03_Input_Output-HeadE-Variable-Header1">Variable</th>
                    <th class="TableStyle-03_Input_Output-HeadE-Type-Header1">
                        <p>Data type</p>
                    </th>
                    <th class="TableStyle-03_Input_Output-HeadE-UM-Header1">UoM</th>
                    <th class="TableStyle-03_Input_Output-HeadD-Description-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-03_Input_Output-Body-LightRows">
                    <td class="TableStyle-03_Input_Output-BodyB-Variable-LightRows">OutputVal_PID_Seq</td>
                    <td class="TableStyle-03_Input_Output-BodyB-Type-LightRows">REAL
 [0..15]</td>
                    <td class="TableStyle-03_Input_Output-BodyB-UM-LightRows">-</td>
                    <td class="TableStyle-03_Input_Output-BodyA-Description-LightRows">Request value</td>
                </tr>
            </tbody>
        </table>
        <p>&#160;</p>
        <h5>Examples</h5>
        <p>&#160;</p>
        <h6>Example 1: management of cooling / heating for the first device</h6>
        <p>
            <img src="../../Resources/Images/3_CAREL_Advanced/PID_Seq/PID_Seq_Example.PNG" class="OneHundredPercentThumbnail" />
        </p>
        <p>&#160;</p>
        <h5 style="mc-locked: unlocked;">Release notes</h5>
        <p style="mc-locked: unlocked;">The following are notes on the released versions of this function/function block:</p>
        <table class="TableStyle-04_Release_Notes" style="mc-table-style: url('../../Resources/TableStyles/04_Release_Notes.css'); width: 80%; margin-left: 0; margin-right: auto;" cellspacing="0">
            <col class="TableStyle-04_Release_Notes-Column-Release" />
            <col class="TableStyle-04_Release_Notes-Column-Dependecies" />
            <col class="TableStyle-04_Release_Notes-Column-Notes" />
            <thead>
                <tr class="TableStyle-04_Release_Notes-Head-Header1">
                    <th class="TableStyle-04_Release_Notes-HeadE-Release-Header1" style="mc-unlocked: unlocked;">Release</th>
                    <th class="TableStyle-04_Release_Notes-HeadE-Dependecies-Header1" style="mc-unlocked: unlocked;">Dependencies</th>
                    <th class="TableStyle-04_Release_Notes-HeadD-Notes-Header1">Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-04_Release_Notes-Body-LightRows">
                    <td class="TableStyle-04_Release_Notes-BodyB-Release-LightRows">1.0.0</td>
                    <td class="TableStyle-04_Release_Notes-BodyB-Dependecies-LightRows">
                        <br />
                    </td>
                    <td class="TableStyle-04_Release_Notes-BodyA-Notes-LightRows">• First official release<br /><br /><b style="mc-locked: unlocked;">Fixed</b><br />-<b style="mc-locked: unlocked;"><br />Deprecated</b><br />-<br /><br /><b style="mc-locked: unlocked;">Enhanced<br />-<br /><br /></b><b>Documentation<br /></b>-<br /><br /></td>
                </tr>
            </tbody>
        </table>
        <p>&#160;</p>
    </body>
</html>