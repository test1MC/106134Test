<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:fileTags="AuthorFileTags.CAREL INDUSTRIES&#160;SpA" xml:lang="en-us" MadCap:lastBlockDepth="8" MadCap:lastHeight="4516" MadCap:lastWidth="933">
    <head>
        <link href="../../../Resources/TableStyles/04_Release_Notes.css" rel="stylesheet" MadCap:stylesheetType="table" />
    </head>
    <body>
        <h4>
            <MadCap:concept term="Comp_BLDC_PowerPlus;EVD_EVO_2" /><a name="Release_Notes"></a>EVD_EVO_2 Release notes</h4>
        <p class="descriptionshort">The following are notes on the released versions of this function/function block.</p>
        <p MadCap:conditions="CAREL_Hq.Reserved">&#160;</p>
        <p MadCap:conditions="CAREL_Hq.Reserved">Last update - 05/09/2016 | Native revision - 29/11/2016</p>
        <p>&#160;</p>
        <table class="TableStyle-04_Release_Notes" cellspacing="0" style="margin-left: 0; margin-right: auto; width: 80%; mc-table-style: url('../../../Resources/TableStyles/04_Release_Notes.css');">
            <col class="TableStyle-04_Release_Notes-Column-Release" />
            <col class="TableStyle-04_Release_Notes-Column-Dependecies" />
            <col class="TableStyle-04_Release_Notes-Column-Notes" />
            <thead>
                <tr class="TableStyle-04_Release_Notes-Head-Header1">
                    <th class="TableStyle-04_Release_Notes-HeadE-Release-Header1">Version</th>
                    <th class="TableStyle-04_Release_Notes-HeadE-Dependecies-Header1">Dependencies</th>
                    <th class="TableStyle-04_Release_Notes-HeadD-Notes-Header1">Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-04_Release_Notes-Body-LightRows">
                    <td class="TableStyle-04_Release_Notes-BodyE-Release-LightRows">1.4.0</td>
                    <td class="TableStyle-04_Release_Notes-BodyE-Dependecies-LightRows">-</td>
                    <td class="TableStyle-04_Release_Notes-BodyD-Notes-LightRows">This version has been released to manage new EVD FW 6.6/6.7 functions<br />The Function Block is backward compatible with EVD FW 5.6/5.7<b><br /><br />Fixed</b><br />-<br /><br /><b style="mc-locked: unlocked;">Changed</b><br />• Added new MBM template "PrbAlrmDT" in order to manage new EVD&#160;FW 6.6/6.7 parameters I131_S1_ALARM_DELAY_msk, I132_S2_ALARM_DELAY_msk, I133_S3_ALARM_DELAY_msk, I134_S4_ALARM_DELAY_msk (this template is enabled only if FW &gt;= 6.6).<br />These parameters can be set from input pin "PrbCfgIn_EVD.Sx.AlrmDT"<br />The new template must be added during block update (see "library management" in <a href="http://goo.gl/n1oHb3">KSA</a>)<br /><br /><b style="mc-locked: unlocked;">Enhanced</b><br />• Added new gas support for driver with FW 6.6/6.7: HFO1234yf, HFO1234ze,
R455A,
R170,
R442A,
R447A,
R448A,
R449A,
R450A,
R452A,
R508B,
R452B,
R513A,
R454B.<br />Check <MadCap:xref href="../../1_CAREL_Basic/_Gas_types_supported.htm">"Gas types supported"</MadCap:xref> for further details.<br /><br />• Added configuration screen for probe alarm delay settings, enabled only if FW &gt;= 6.6 (Loop "EVD_CONFIG", mask "EVD_EVO_Cfg_7a"). To use this new screen , please update the worksheet template.<br /><b><br />Deprecated</b><br />-<br /><br /><b>Documentation</b><br />• Added new paragraph <MadCap:xref href="EVD_EVO_2.htm#Probe">"Probe alarm management"</MadCap:xref>.<br /><br />• Updated paragraph <MadCap:xref href="EVD_EVO_2.htm#Modbus">"Modbus Master"</MadCap:xref> with the new template for probe alarm delay.<br /></td>
                </tr>
                <tr class="TableStyle-04_Release_Notes-Body-DarkerRows">
                    <td class="TableStyle-04_Release_Notes-BodyE-Release-DarkerRows">1.3.0</td>
                    <td class="TableStyle-04_Release_Notes-BodyE-Dependecies-DarkerRows">-</td>
                    <td class="TableStyle-04_Release_Notes-BodyD-Notes-DarkerRows"><b>Fixed</b>
                        <br />• Fixed saving of default installation request through input pin "DefaultMemoryIn_EVD" (when the block is disabled): now it works. "DefaultMemoryIn_EVD" must be retain<br /><br />• Fixed problem with Default installation from input pin "InstDefIn_EVD": defaults were overwritten if the installation was made from a condition of EVD in configuration error or if the installation was made with the block enabled but driver offline<br /><br />• Fixed wrong configuration error with some parameters: when one of these parameters was out of range, there was a configuration error but on the wrong variable. Now the error is reported on the correct parameter: see "<i>How to debug a Configuration error</i>" for more information<br /><br />• Fixed wrong EVD behavior in case of configuration error (parameter out of range): before, if there was a parameter out of range, the EVD properly reported an error, but if the parameter re-entered within the limits, the EVD didn't recover to normal communication status (it required a function block reboot)<br /><br />• Fixed minimum limit of variable "CfgParamsIn_EVD.CondHiTempThrsh" from "-60" to "-85"<br /><br />• Moved variable "LCTRL_Level" from input "VlvA/BIn_EVD" to output "VlvA/B_Info_EVD" : it was wrongly managed as an R/W param instead of READ only<br /><br />• Fixed name of variable "VlvA_EVD.AuxiliayReg" to "VlvA_EVD.AuxReg". IMPORTANT: some connections may be lost in c.strategy due to name change, also in c.mask; please check these.<br /><br /><b style="mc-locked: unlocked;">Changed</b><br />- <br /><br /><b style="mc-locked: unlocked;">Enhanced</b><br />• Added comments inside the main block and divided the main code into several sections in order to understand it better<br /><br />• Added new input parameter in VlvA/B structures "VlvOpenInStBy": valve position in % in standby status. For more information, see EVD driver manual, chapter "6.4 Control status", paragraph "Standby"<br /><br />• Added parameters to manage Aux function control n.3 "Modulating thermostat on probe S4": "Thermo_SetP" "Thermo_Diff" and "Thermo_SH_Offset" are now present in input pin "CfgParamsIn_EVD". If you don't use this control function, set the initial values of these parameters to "-777.7"<br /><br />• Improved some variable comments of input structures according to EVD driver manual<br /><b><br />Deprecated</b><br />-<br /><br /><b>Documentation</b><br />• Improved the whole structure of the documentation<br /><br />• Added new chapter "Getting started", which contains the steps to import and configure the EVD<br /><br />• Added some Main and Aux control explanations in chapter "2. Driver control functions"<br /><br />• Probes management grouped in a new chapter "3. Probe management"<br /><br />• Added chapter "8. Alarms"<br /><br />• Fixed some minor errors in the documentation (CAREL_Ref Ticket #119)<br /><br />• Improved "Example 3: adding parameters not managed in EVD_EVO_2"<br /></td>
                </tr>
                <tr class="TableStyle-04_Release_Notes-Body-LightRows">
                    <td class="TableStyle-04_Release_Notes-BodyE-Release-LightRows">1.2.6</td>
                    <td class="TableStyle-04_Release_Notes-BodyE-Dependecies-LightRows">-</td>
                    <td class="TableStyle-04_Release_Notes-BodyD-Notes-LightRows"><b>Fixed</b>
                        <br />• Added control for the calculation of Kp. Before, if at Evd startup the Kp value was -777.7, with some types of control (15,16, 21 and 24) the final calculation of Kp returned a value that was not acceptable by the driver, so there was a configuration error (and a exception in the communication).<br /><br />• Fixed upper limit of "I73_REGULATION_TYPE_2ND", from 22 to 26: before, if the SUPER_MAIN_REG_2ND was greater than 22, there was a configuration error<br /><br />• Changed data type of "Kp" variable contained inside the input pin "VlvA_EVD_1.EVD_PID_Reg", from UINT to INT: before, in case of -7777 (parameter non used), Kp took a wrong value due to the UINT type.<br /><br />• Fixed default value of "A59_THERMO_SH_OFFSET " variable in case of aux control = 10; before it was "0", now it has been corrected to "10"<br /><br /><b style="mc-locked: unlocked;">Changed</b><br />• Deleted "DevNo_EVD" input pin; after the library update, remember to fix the input variables of the EVD block<br /><br /><b style="mc-locked: unlocked;">Enhanced</b><br />• Added information about the Protection status (MOP, LOP, Low SH, etc..) in output "VlvA/B_Info_EVD" (Carel_Ref #194)<br /><b><br />Deprecated</b><br />-<br /></td>
                </tr>
                <tr class="TableStyle-04_Release_Notes-Body-DarkerRows">
                    <td class="TableStyle-04_Release_Notes-BodyB-Release-DarkerRows">1.2.0</td>
                    <td class="TableStyle-04_Release_Notes-BodyB-Dependecies-DarkerRows">-</td>
                    <td class="TableStyle-04_Release_Notes-BodyA-Notes-DarkerRows"><b>First release</b>
                        <br />EVD_EVO_2 replaces EVD_EVO and manages the new EVD driver firmware 5.6/5.7 functions :<ul style="list-style-type: square;"><li>Added support for programmable controls (22, 23 ,24)</li><li>Added support for Flooded Evap/Condens control with Carel liquid sensor (25, 26)</li><li>Added new NTC - LT probe (S2 - S4) and new Carel liquid level sensor (S1 - S3)</li><li>Added new valves ("Danfoss CCMT 2-4-8" and "Disable")</li><li>Direct relay command (possibility of direct command of relays A/B from application)</li></ul><p>EVD_EVO_2 has been aligned with the new library management in c.suite ≥ 2.5.6<b><br /><br />Fixed</b><br />• Fixed output parameter reset when the block is disabled: now the outputs are reset (Carel_Ref Ticket #124)<br /><br />• Fixed "DrvReadyToGo" went FALSE&#160;when cooling capacity changes from 100% to 0%: now it stays TRUE<br /><br />• Fixed "FW release" management; now it is read correctly from the driver (Carel_Ref Ticket#118)<br /><br />• Fixed bug that sets System_Error alarm for the first program cycle (Carel_Ref Ticket #80)<br /><br />• Fixed alarm reset when the block is disabled<br /><br />• Fixed incorrect assignment of input variable "VlvB_CstParamsIn.FullCloseStepsCst": the variable assigned the value to valve "A" instead of valve "B", now it has been fixed. (Carel_Ref IRM #3354)<br /><br />• Fixed Super parameter configuration error: before it didn't work, now the error is correctly reported.<br /><br /><b style="mc-locked: unlocked;">Changed</b><br />• Changed Data Types name and EVD_EVO_2 shape: refer to Demo_EVD_EVO_2 and document "EVD_EVO_2_DataTypes" on <a href="http://ksa.carel.com/group/c.suite/librariesf/fb">KSA</a><br /><br />• Changed the firmware_compatibility_error settings: the FB is now compatible ONLY with firmware versions &gt;= 5.6<br /><br />• Deleted Manual/Automatic alarm management (deleted input pins "AlrmsAutoManRes_EVD" and "ResAlrm_EVD"). <br />Alarms are now managed only by c.suite. See Demo_EVD_EVO_2 for more information.<br /><br /><b style="mc-locked: unlocked;">Enhanced</b><br />• Deleted the old "UnitOfMeasure" management and replaced with the Operating System unit management.  Now the block works only in the International System. (Carel_Ref Ticket#62)<br /><br />• Added screen variables to output pins (Carel_Ref Ticket #136). Refer to Demo_EVD_EVO_2 and document "EVD_EVO_2_DataTypes" on <a href="http://ksa.carel.com/group/c.suite/librariesf/fb">KSA</a><br /><br />• Improved default procedure: deleted the "DefParams" structure, now only the Dev value of the input parameters on EVD_EVO_2 needs to be set (See Demo_EVD_EVO_2 for more information). (Carel_Ref Ticket #137)<br /><br />• Improved Online/Offline management; added 4th state management (device not yet queried) for serial line communication (Device error)<br /><br />• Added VAR in/out management for inputs "VlvA/B_EVD", "PrbCfg_EVD", "CfgParams_EVD", "BLDC_Params_EVD".<br />This management was required in order to automatically set the child parameters of the   SUPER_MAIN_REGULATION, SUPER_EEV_TYPE and SUPER_AUX_REGULATION Super Parameters, when one of these changed. <br />Before, the child parameters needed to be set manually, according to the selected Super Parameter.<br /><br />• Aligned block to guidelines:</p><ul><li>Added suffix "_EVD" in input/output variables</li><li>Added protocol flags inside the EVD_EVO block and deleted UI and Retain flags</li><li>Created structure "COM_ERR_EVD" that contains the DevErr and DevErrCode. The structure is set as output pin. </li><li>Reviewed EVD_EVO_2 shape<br /></li></ul><b><br />Deprecated</b><br />• This block replaces EVD_EVO<b><br /></b></td>
                </tr>
            </tbody>
        </table>
        <p>&#160;</p>
        <p>
            <MadCap:conceptLink term="Comp_BLDC_PowerPlus" />
        </p>
        <p>&#160;</p>
    </body>
</html>