<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" MadCap:lastBlockDepth="8" MadCap:lastHeight="2574" MadCap:lastWidth="1332" MadCap:fileTags="AuthorFileTags.CAREL INDUSTRIES&#160;SpA">
    <head>
        <link href="../../../Resources/TableStyles/02_Custom.css" rel="stylesheet" MadCap:stylesheetType="table" /><title></title>
        <link href="../../../Resources/Stylesheets/styles.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h4 style="mc-locked: unlocked;">Application migration  with new library management - Tutorial</h4>
        <p class="descriptionshort">Document version: 1.2</p>
        <p MadCap:conditions="CAREL_Hq.Reserved">Last update 05/10/2015 | Native revision 05/10/15</p>
        <p>&#160;</p>
        <p>This tutorial describes the migration process foran application with the new library supported byc.suite version 2.5.6 or higher.</p>
        <h5 style="mc-locked: unlocked;">Library overview </h5>
        <table style="width: 100%; mc-table-style: url('../../../Resources/TableStyles/02_Custom.css'); mc-table-style-original: url('../../../Resources/TableStyles/02_Custom.css');" class="TableStyle-02_Custom" cellspacing="0">
            <col style="width: 314px;" class="TableStyle-02_Custom-Column-Default" />
            <col style="width: 159px;" class="TableStyle-02_Custom-Column-Default" />
            <col style="width: 279px;" class="TableStyle-02_Custom-Column-Default" />
            <col style="width: 242px;" class="TableStyle-02_Custom-Column-Default" />
            <tbody>
                <tr class="TableStyle-02_Custom-Body-LightRows">
                    <td style="font-weight: bold;text-align: center;" colspan="2" class="TableStyle-02_Custom-BodyE-Default-LightRows">
                        <p colspan="2">Current <span style="font-weight: normal;">until 22/06/2015</span> <i>(mdb)</i></p>
                    </td>
                    <td style="font-weight: bold;text-align: center;font-style: italic;" colspan="2" class="TableStyle-02_Custom-BodyD-Default-LightRows"><i style="font-style: normal;">New </i><span style="font-weight: normal; font-style: normal;">from c.suite version 2.5.6 </span>(pp1)</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-DarkerRows">
                    <td style="font-weight: bold;" class="TableStyle-02_Custom-BodyE-Default-DarkerRows">Name</td>
                    <td style="font-weight: bold;font-style: italic;" class="TableStyle-02_Custom-BodyE-Default-DarkerRows">Version</td>
                    <td style="font-weight: bold;font-style: italic;" class="TableStyle-02_Custom-BodyE-Default-DarkerRows">Name</td>
                    <td style="font-weight: bold;font-style: italic;" class="TableStyle-02_Custom-BodyD-Default-DarkerRows">Version</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-LightRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">CAREL_BASIC_LIB</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">1.2.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">CAREL_BASIC_LIB</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-LightRows">2.3.0</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-DarkerRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">PID_Adv </td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">2.0.0 (KSA) or from basic 1.2.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">PID_Adv_2</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-DarkerRows">1.0.0</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-LightRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">Blackout_2</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">1.1.1 (KSA) or from basic 1.2.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">Blackout_3</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-LightRows">1.0.0</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-DarkerRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">CheckRetainMem</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">from basic 1.2.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">CheckRetainMem</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-DarkerRows">1.2.0</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-LightRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">EVD_EVO</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">1.1.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">EVD_EVO_2</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-LightRows">1.2.0</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-DarkerRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">EVD_Emb</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">1.1.2</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">EVD_Emb_2</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-DarkerRows">1.2.0</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-LightRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">cpCOe</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">1.1.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">cpCOe_2</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-LightRows">1.1.3</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-DarkerRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">Humisonic</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">1.0.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">Humisonic_2</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-DarkerRows">1.1.1</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-LightRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">CPY</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">1.1.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">CPY_x</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-LightRows">x.x.x</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-DarkerRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">EnergyMeter_Mono</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">1.0.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">EnergyMeter_Mono_2</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-DarkerRows">x.x.x</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-LightRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">SerialProbe</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">1.0.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">SerialProbe_2</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-LightRows">1.3.0</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-DarkerRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">DevicesRotation_2</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">1.0.10</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">DevicesRotation_3</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-DarkerRows">1.1.0</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-LightRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">PrbAlrm</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">0.1.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">PrbAlrm_2</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-LightRows">1.0.0</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-DarkerRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">VersionChk</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">1.0.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-DarkerRows">VersionChk_2</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-DarkerRows">1.0.0</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-LightRows">
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">ZiehlAbeggFan</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">1.0.0</td>
                    <td class="TableStyle-02_Custom-BodyE-Default-LightRows">ZiehlAbeggFan_2</td>
                    <td class="TableStyle-02_Custom-BodyD-Default-LightRows">x.x.x</td>
                </tr>
                <tr class="TableStyle-02_Custom-Body-DarkerRows">
                    <td class="TableStyle-02_Custom-BodyB-Default-DarkerRows">EbmpapstFan</td>
                    <td class="TableStyle-02_Custom-BodyB-Default-DarkerRows">1.0.0</td>
                    <td class="TableStyle-02_Custom-BodyB-Default-DarkerRows">EbmpapstFan_2</td>
                    <td class="TableStyle-02_Custom-BodyA-Default-DarkerRows">1.2.0</td>
                </tr>
            </tbody>
        </table>
        <h5>Difference between Refactoring and Updating a library</h5>
        <p>There are two ways to import a library: <i>Refactoring</i> and <i>Update</i>. </p>
        <p style="font-weight: bold;">Update:</p>
        <p style="font-weight: bold;"><span style="font-weight: normal;">In the Solution Explorer, right click on Dependency &gt; "Add Dependencies"</span>
        </p>
        <p>Useful for:</p>
        <ol style="list-style-type: lower-alpha;">
            <li>Importing a library the first time</li>
            <li>Updating an existing dependency with a new one, with a new version number<br />e.g. from <i>EVD_Evo v1.0.0</i> to <i>EVD_Evo v1.1.0</i></li>
        </ol>
        <p><b>Refactoring:</b>
        </p>
        <p>Right click on the existing library&gt; "Refactoring..."</p>
        <p>Useful for:</p>
        <ol style="list-style-type: lower-alpha;">
            <li>Refactoring a library already present on the dependency, with a new library with "old name" plus suffix.<br />e.g. from <i>EVD_Evo </i>to <i>EVD_Evo_2</i><br /></li>
        </ol>
        <h5>Steps for porting</h5>
        <ol>
            <li>Compile the solution with the  c.suite version &lt; 2.5.6 without errors (also check c.design) in order to <b>start with a correct solution</b></li>
            <li>
                <p>Create a solution backup before starting the migration process</p>
            </li>
            <li>Open project with c.suite version ≥ 2.5.6; in "Tools" --&gt;"Options" --&gt; "Compilation" enable the "Check Undefined Data Types"</li>
            <li>Message "Variables data models requires and update...proceed?" --&gt; YES</li>
            <li>Check if the application uses the followingFBs:<ul style="list-style-type: square;"><li>PID_Adv</li><li>Blackout</li><li>CheckRetainMem<br /></li></ul><p>These blocks have beentaken out from the CAREL_BASIC_LIB, so they need to be replacedwith those available on KSA.<br /><b>TIP</b> - Use the "<i>Export Referenced Libraries Data Types</i>" features and check which F/FB are used.</p></li>
            <li>Download the requiredlibrary from KSA</li>
            <li>
                <p>Import the dependencies forthose FBs:<br /></p>
                <ul>
                    <li> <b style="font-style: italic;">add "dependencies"</b></li>
                    <li>At the endof the import process, search for all old  instances of this FB and replace it with the new data type.</li>
                    <li>It maybe necessary to refresh the shape of the instance of the FB and manage the new pins.</li>
                    <li>Repeatfor the other FBs.<br /></li>
                </ul>
                <p>if some function blocks (<i>ex. Blackout</i>) arealready present inthe dependencies, 'refactoring is required, and not an update(see the previous paragraph).</p>
            </li>
            <li>
                <p>Update the other dependencies with the following method.</p>
                <ul style="list-style-type: square;">
                    <li>If the application <u>uses</u> the <b>EVD_Emb</b> FB:<br /><ol><li>Update all the libraries, except the EVD_Emb<br /></li><li>Update the EVD_Emb</li><li>Compile and go to step 10 (*)</li></ol></li>
                    <li>If the application <u>doesn't use</u> the <b>EVD_Emb</b> FB:<ol><li>Update all the libraries</li><li>Go to step 9</li></ol></li>
                </ul>
                <p>* EVD_Emb uses the CAREL_BASIC_LIB, so once updated, also the CAREL_BASIC_LIB inthe project will be updated (step 9 can be skipped, proceeding to compilation, in case of errors see paragraph "<a href="#Compilat">Compilation errors</a>").<br /></p>
                <p>If some FBs are <i>already present in the dependency</i> and the new ones have a different suffix <i>("_2")</i><b style="text-decoration: underline; font-style: italic; font-weight: bold;">refactoring</b> is required:</p>
                <ol style="list-style-type: lower-alpha;">
                    <li>explore "dependencies" &gt; right click on the name of the dependency to update &gt; refactoring</li>
                    <li>for each refactoring makea backup and only after that, compile</li>
                    <li>search for the old instance of this FB, it maybe undefined. In FBD page delete the FB and create a new instance</li>
                    <li>search for it in Local/Global variable and write the correct data type name or double click on it and select the new instance name</li>
                </ol>
                <p>Pay attention to the flag and the unit of measure property: undefined variables lose all these properties.</p>
                <p style="font-weight: bold;"><b>TIP</b><span style="font-weight: normal;">- in order to restore the flag:</span>
                </p>
                <ol style="list-style-type: lower-alpha;">
                    <li> import the program POU&#160;from template</li>
                    <li>copy and paste necessary variables</li>
                    <li>rename them with the name used in your application</li>
                    <li>delete the imported program POU </li>
                </ol>
            </li>
            <li>Add the"dependencies" of <b>CAREL_BASIC_LIB 2.3.0</b><br />Compile and, in case of errors see paragraph "<a href="#Compilat">Compilation errors</a>".</li>
            <li>open <b>c.design</b> and align the name of the variables used </li>
            <li>open <b>c.mask</b> and align the name of the variables used </li>
        </ol>
        <h5><a name="Compilat"></a>Compilation errors</h5>
        <h6>Undefined data type</h6>
        <p>In case of "undefined data type", it may be necessary to re-instance the FBs that give the error.</p>
        <h6>Defined words conflict</h6>
        <p>If there is a defined words conflict, it means that the libraries that have been imported contain some defined words that have the same name asthe ones in the project.</p>
        <p>How to proceed?</p>
        <ul>
            <li>If the Defined word in conflict is used in the project, change the name to the one in the project. To verify if a Defined Word is used in the project use the find function(ctrl + F)</li>
            <li>If the Defined word in conflict isn't used in the project, delete the one in the project</li>
        </ul>
        <p>&#160;</p>
    </body>
</html>